{% extends "layout.html" %}

{% block title %}Inventory & Products{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h2 class="section-title" style="margin-bottom: 0;">Product List</h2>
        <a href="{{ url_for('add_product') }}" class="btn-primary" style="text-decoration: none;">Add Product</a>
        <!-- Note: Add button is visual only for now, can be implemented later -->
    </div>

    <table>
        <thead>
            <tr>
                <th>SKU</th>
                <th>Name</th>
                <th>Category</th>
                <th>Supplier</th>
                <th class="text-right">Price</th>
                <th class="text-right">Stock</th>
                <th class="text-right">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td style="font-family: monospace; color: var(--text-secondary);">{{ product.sku }}</td>
                <td style="font-weight: 600;">{{ product.name }}</td>
                <td><span class="badge neutral">{{ product.category_name }}</span></td>
                <td>{{ product.supplier_name }}</td>
                <td class="text-right">${{ "%.2f"|format(product.price) }}</td>
                <td class="text-right 
                    {% if product.stock_quantity < 20 %}
                        {% if product.stock_quantity == 0 %}
                            stock-out
                        {% else %}
                            stock-low
                        {% endif %}
                    {% endif %}
                ">
                    {% if product.stock_quantity == 0 %}
                    <span class="badge danger">Out of Stock</span>
                    {% elif product.stock_quantity < 20 %} <span class="badge warning">{{ product.stock_quantity
                        }}</span>
                        {% else %}
                        <span class="badge success">{{ product.stock_quantity }}</span>
                        {% endif %}
                </td>
                <td class="text-right">
                    <div style="display: flex; justify-content: flex-end; gap: 0.5rem;">
                        <a href="{{ url_for('edit_product', id=product.id) }}" class="btn-secondary"
                            style="padding: 0.25rem 0.5rem; font-size: 0.8rem; text-decoration: none;">Edit</a>
                        <form action="{{ url_for('delete_product', id=product.id) }}" method="POST"
                            onsubmit="return confirm('Are you sure you want to delete this product?');"
                            style="display: inline;">
                            <button type="submit" class="btn-danger"
                                style="padding: 0.25rem 0.5rem; font-size: 0.8rem; border: none; cursor: pointer; background: var(--danger); color: white; border-radius: 4px;">Delete</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}